<script setup>
import { onMounted, ref } from 'vue';


defineProps({
    type: Number
})

let isOpen = ref(false)
let Height = ref(0)
let ContentElem = ref(null)

let toggleOpen = () => {
    isOpen.value = !isOpen.value

    calculateHeight()
    if (!isOpen.value) {
        Height.value = 0
    }
}


let calculateHeight = () => {
    if (isOpen.value) {
        Height.value = ContentElem.value.clientHeight
    }
}

onMounted(() => calculateHeight())

</script>

<template>
    <div :class="{
        'DownloadSection': true,
        'active': isOpen,
        'type-0': type == 0,
        'type-1': type == 1,
        'type-2': type == 2,
    }">
        <div class="title_bg">{{ type == 0 ? 'زیرنویس' : type == 1 ? 'دوبله' : 'نسخه بدون زیرنویس' }}</div>
        <div class="DownloadSection-inner">
            <div class="top" @click="toggleOpen">
                <div class="right">

                    <svg class="icon document_cloud_icon" v-if="type == 0 || type == 2">
                        <use xlink:href="#document_cloud">
                            <symbol viewBox="0 0 100 100" id="document_cloud">
                                <path
                                    d=" M 33.25 5.32 C 42.04 5.17 50.83 5.27 59.62 5.27 C 71.35 16.94 83.02 28.65 94.71 40.35 C 94.69 45.16 94.92 49.98 94.66 54.79 C 94.49 58.07 89.19 58.10 88.60 54.97 C 88.33 51.57 88.56 48.15 88.50 44.75 C 80.63 44.36 72.49 45.80 64.83 43.42 C 59.41 41.77 56.08 36.38 55.56 30.94 C 54.88 24.49 55.42 17.98 55.25 11.50 C 44.21 12.07 32.58 9.80 22.06 14.09 C 14.68 17.21 11.95 25.64 11.61 33.03 C 11.34 43.34 11.58 53.67 11.49 63.99 C 11.65 70.96 12.72 78.93 18.46 83.65 C 24.04 88.24 31.64 88.25 38.48 88.70 C 41.63 89.23 41.19 94.76 37.95 94.69 C 27.90 95.12 16.07 92.90 10.18 83.86 C 3.69 73.77 5.52 61.29 5.25 49.94 C 5.51 38.83 3.77 26.72 9.80 16.73 C 14.56 8.65 24.41 5.70 33.25 5.32 M 61.50 15.88 C 62.02 22.46 59.90 30.12 64.19 35.79 C 69.86 40.11 77.53 37.98 84.12 38.50 C 76.59 30.95 69.05 23.41 61.50 15.88 Z">
                                </path>
                                <path
                                    d=" M 56.80 60.83 C 62.47 53.89 74.28 52.75 80.64 59.34 C 82.80 61.39 83.96 64.17 85.05 66.88 C 91.89 69.21 96.16 76.87 94.46 83.91 C 93.21 90.03 87.30 94.70 81.09 94.74 C 73.09 94.75 65.09 94.78 57.09 94.73 C 51.83 94.73 47.20 90.16 46.86 84.97 C 46.28 80.25 49.13 75.67 53.38 73.71 C 52.87 69.20 53.67 64.30 56.80 60.83 M 66.53 61.73 C 63.17 62.70 60.35 65.49 59.69 68.98 C 58.78 71.98 61.25 74.94 60.14 77.88 C 58.84 79.71 56.01 78.91 54.49 80.47 C 52.00 82.86 53.20 88.26 56.98 88.41 C 64.66 88.64 72.35 88.43 80.04 88.51 C 82.97 88.65 85.99 87.23 87.46 84.63 C 89.36 81.58 88.64 77.35 86.09 74.90 C 84.57 73.10 82.05 73.02 80.09 71.98 C 78.83 70.28 78.81 67.96 77.82 66.10 C 75.94 61.98 70.66 60.28 66.53 61.73 Z">
                                </path>
                            </symbol>
                        </use>
                    </svg>
                    <svg class="icon microphone_icon" v-if="type == 1">
                        <use xlink:href="#microphone">
                            <symbol viewBox="0 0 100 104" id="microphone">
                                <path
                                    d=" M 44.35 6.61 C 53.15 3.82 63.45 8.17 67.59 16.41 C 70.61 21.79 69.60 28.11 69.74 33.99 C 69.68 39.56 69.88 45.14 69.67 50.70 C 68.83 61.15 58.44 69.49 48.05 68.17 C 38.45 67.42 30.16 58.74 30.25 49.05 C 30.26 41.02 30.24 32.98 30.26 24.95 C 30.26 16.61 36.35 8.84 44.35 6.61 M 46.45 12.56 C 40.98 14.05 36.61 19.25 36.52 24.98 C 36.45 32.64 36.53 40.30 36.49 47.96 C 36.28 52.95 39.08 57.93 43.50 60.27 C 49.55 63.90 58.10 61.49 61.56 55.41 C 63.80 52.06 63.57 47.91 63.51 44.06 C 63.40 37.40 63.65 30.73 63.42 24.07 C 62.77 16.17 54.06 10.16 46.45 12.56 Z">
                                </path>
                                <path
                                    d=" M 46.45 23.51 C 50.27 22.92 54.35 23.18 57.87 24.88 C 59.96 26.64 58.85 30.39 56.06 30.52 C 53.45 30.18 50.85 29.00 48.20 29.66 C 46.24 29.82 44.09 31.23 42.26 29.90 C 40.69 28.71 40.60 26.23 42.13 24.96 C 43.44 24.18 44.95 23.79 46.45 23.51 Z">
                                </path>
                                <path
                                    d=" M 45.30 33.36 C 48.31 32.47 51.71 32.36 54.71 33.37 C 57.08 34.25 57.12 37.94 54.91 39.06 C 51.62 39.19 48.31 39.19 45.02 39.06 C 43.01 37.72 42.87 34.30 45.30 33.36 Z">
                                </path>
                                <path
                                    d=" M 15.11 40.03 C 15.43 36.89 20.81 36.86 21.14 40.01 C 21.54 44.28 20.83 48.63 21.71 52.87 C 23.89 66.18 36.49 76.72 49.98 76.54 C 62.70 76.69 74.75 67.39 77.80 55.04 C 79.27 50.14 78.48 45.01 78.86 39.99 C 79.21 36.85 84.60 36.90 84.89 40.05 C 85.30 47.40 85.23 55.10 82.08 61.92 C 77.18 73.43 65.68 81.59 53.25 82.71 C 53.11 86.38 53.67 90.15 52.82 93.76 C 51.53 95.80 48.49 95.76 47.17 93.78 C 46.79 90.11 47.08 86.41 46.97 82.73 C 35.49 81.74 24.76 74.83 19.26 64.69 C 14.99 57.24 14.54 48.40 15.11 40.03 Z">
                                </path>
                            </symbol>
                        </use>
                    </svg>
                    {{ type == 0 ? 'زیرنویس جسبیده' : type == 1 ? 'دوبله فارسی' : 'نسخه بدون زیرنویس' }}
                </div>
                <div class="arrow">
                    <svg class="icon arrow_down_icon">
                        <use xlink:href="#arrow_down">
                            <symbol viewBox="0 0 10 6" id="arrow_down">
                                <path
                                    d="M5.0006 3.97656L8.53643 0.440729C8.86182 0.115341 9.38938 0.115341 9.71477 0.440729V0.440729C10.0402 0.766117 10.0402 1.29367 9.71477 1.61906L5.78864 5.54518C5.35342 5.98041 4.64778 5.98041 4.21255 5.54518L0.286432 1.61906C-0.0389555 1.29367 -0.0389554 0.766117 0.286432 0.440729V0.440729C0.61182 0.115341 1.13938 0.115341 1.46477 0.440729L5.0006 3.97656Z">
                                </path>
                            </symbol>
                        </use>
                    </svg>
                </div>
            </div>
            <div class="bottomparent" :style="{ height: Height + 'px' }">
                <div class="bottomLinks" ref="ContentElem">
                    <slot />
                </div>
            </div>
        </div>
    </div>
</template>

<style scoped>
@import '@/assets/css/views/Movie/navbar/download/MovieDownload/DownloadSection.css';
</style>